var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");
(function(a){function b(c){"mediaDialogModal"===c.data.sender&&("undefined"!==typeof c.data.field&&c.data.field.length&&media_callback(c.data.field.attr("id")),a(".media-dialog").removeClass("show"),a(".media-modal-backdrop").remove())}a(document).on("click",".btn-remove",function(){a(this).parents(".media-input-group").find("input").val("");a(this).parents(".media-box").find(".media-preview").empty()});a(document).on("click",".btn-browse",function(c){c.preventDefault();var b=a(this).data("target");
b.length&&(a(b).addClass("show"),a(".media-modal-backdrop").remove(),a("body").append('<div class="media-modal-backdrop fade show"></div>'),a.ajax({type:"POST",url:a(this).attr("href"),success:function(c){a(b).find(".modal-body").html(c)}}));return!1});a(".media-dialog").on("click",".btn-close",function(){var c=a(this).prev(".media-input-group").find("input.media-input");c=JSON.parse(JSON.stringify({sender:"mediaDialogModal",field:c}));window.postMessage(c,window.location.origin)});a(".media-preview.multiple").sortable({cursor:"move"});
a(".media-preview.multiple").disableSelection();a(".media-preview.multiple").on("sortstop",function(c,b){c=a(c.target);b=c.find("img").map(function(){return a(this).attr("src")}).get();c.parents(".media-box").find(".media-input").val(JSON.stringify(b))});window.addEventListener?window.addEventListener("message",b,!1):window.attachEvent("onmessage",b)})(jQuery);
function media_callback(a){a=$("#"+a);var b=a.val(),c=a.parents(".media-box").find(".media-preview"),d=[];c.empty();if(b.length){try{b=$.parseJSON(b)}catch(e){b=[b]}$.each(b,function(a,b){file_name=b.split("/").pop();d.push(file_name);file_element=$('<span class="name"></span>').text(file_name);preview=$('<div class="file"></div>');isImage(b)?(img=$("<img>").attr("src",b),preview.append(img).addClass("image")):(extension=b.split(".").pop(),preview.html('<span class="type">'+extension+"</span>").addClass(extension),
preview.append(file_element));a=$('<div class="media-item"></div>').html(preview);c.append(a)});a.siblings(".form-message").val(b.length+" file(s) selected")}b=a.parent("div").find(".btn-browse");browse_url=b.attr("href");new_browse_url=changeBrowseURL(browse_url,d);b.attr("href",new_browse_url);a.trigger("change")}function isImage(a){return null!=a.match(/\.(jpeg|jpg|gif|png|svg)$/)}
function changeBrowseURL(a,b){b=JSON.stringify(b);a=new URL(a,location.origin);var c=new URLSearchParams(a.search);c.set("selected",btoa(b));a.search=c.toString();return a.toString()};
