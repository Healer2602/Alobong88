var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(b,h,g){b instanceof String&&(b=String(b));for(var c=b.length,e=0;e<c;e++){var m=b[e];if(h.call(g,m,e,b))return{i:e,v:m}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,h,g){b!=Array.prototype&&b!=Object.prototype&&(b[h]=g.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,h,g,c){if(h){g=$jscomp.global;b=b.split(".");for(c=0;c<b.length-1;c++){var e=b[c];e in g||(g[e]={});g=g[e]}b=b[b.length-1];c=g[b];h=h(c);h!=c&&null!=h&&$jscomp.defineProperty(g,b,{configurable:!0,writable:!0,value:h})}};$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,g){return $jscomp.findInternal(this,b,g).v}},"es6","es3");
(function(){var b=tinymce.util.Tools.resolve("tinymce.PluginManager"),h=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),g=tinymce.util.Tools.resolve("tinymce.util.I18n"),c=tinymce.util.Tools.resolve("tinymce.util.Tools"),e={getTocClass:function(a){return a.getParam("toc_class","mce-toc")},getTocHeader:function(a){a=a.getParam("toc_header","h2");return/^h[1-6]$/.test(a)?a:"h2"},getTocDepth:function(a){a=parseInt(a.getParam("toc_depth","3"),10);return 1<=a&&9>=a?a:3}};(function(a){var k=0;return function(){var b=
(new Date).getTime().toString(32);return a+b+(k++).toString(32)}})("mcetoc_");var m=function(a){var k,b=[];for(k=1;k<=a;k++)b.push("h"+k);return b.join(",")},p=function(a){var k=e.getTocClass(a),b=e.getTocHeader(a),d=m(e.getTocDepth(a));d=a.$(d);d.length&&/^h[1-9]$/i.test(b)&&(d=d.filter(function(b,d){return!a.dom.hasClass(d.parentNode,k)}));return c.map(d,function(b,k){return{id:u(a.$.text(b)),level:parseInt(b.nodeName.replace(/^H/i,""),10),title:a.$.text(b),element:b}})},u=function(a){a=a.toString().toLowerCase().trim();
[{to:"a",from:"[\u00c0\u00c1\u00c2\u00c3\u00c4\u00c5\u00c6\u0100\u0102\u0104\u1ea0\u1ea2\u1ea4\u1ea6\u1ea8\u1eaa\u1eac\u1eae\u1eb0\u1eb2\u1eb4\u1eb6]"},{to:"c",from:"[\u00c7\u0106\u0108\u010c]"},{to:"d",from:"[\u00d0\u010e\u0110\u00de]"},{to:"e",from:"[\u00c8\u00c9\u00ca\u00cb\u0112\u0114\u0116\u0118\u011a\u1eb8\u1eba\u1ebc\u1ebe\u1ec0\u1ec2\u1ec4\u1ec6]"},{to:"g",from:"[\u011c\u011e\u0122\u01f4]"},{to:"h",from:"[\u0124\u1e26]"},{to:"i",from:"[\u00cc\u00cd\u00ce\u00cf\u0128\u012a\u012e\u0130\u1ec8\u1eca]"},
{to:"j",from:"[\u0134]"},{to:"ij",from:"[\u0132]"},{to:"k",from:"[\u0136]"},{to:"l",from:"[\u0139\u013b\u013d\u0141]"},{to:"m",from:"[\u1e3e]"},{to:"n",from:"[\u00d1\u0143\u0145\u0147]"},{to:"o",from:"[\u00d2\u00d3\u00d4\u00d5\u00d6\u00d8\u014c\u014e\u0150\u1ecc\u1ece\u1ed0\u1ed2\u1ed4\u1ed6\u1ed8\u1eda\u1edc\u1ede\u1ee0\u1ee2\u01ea\u01ec\u01a0]"},{to:"oe",from:"[\u0152]"},{to:"p",from:"[\u1e55]"},{to:"r",from:"[\u0154\u0156\u0158]"},{to:"s",from:"[\u00df\u015a\u015c\u015e\u0160]"},{to:"t",from:"[\u0162\u0164]"},
{to:"u",from:"[\u00d9\u00da\u00db\u00dc\u0168\u016a\u016c\u016e\u0170\u0172\u1ee4\u1ee6\u1ee8\u1eea\u1eec\u1eee\u1ef0\u01af]"},{to:"w",from:"[\u1e82\u0174\u1e80\u1e84]"},{to:"x",from:"[\u1e8d]"},{to:"y",from:"[\u00dd\u0176\u0178\u1ef2\u1ef4\u1ef6\u1ef8]"},{to:"z",from:"[\u0179\u017b\u017d]"},{to:"-",from:"[\u00b7/_,:;']"}].forEach(function(b){a=a.replace(new RegExp(b.from,"gi"),b.to)});a=a.toString().toLowerCase().replace(/\s+/g,"-").replace(/&/g,"-and-").replace(/[^\w\-]+/g,"").replace(/\--+/g,"-").replace(/^-+/,
"").replace(/-+$/,"");"undefined"!==typeof separator&&"-"!==separator&&(a=a.replace(/-/g,separator));return a},v=function(a){var b=q(a);return'<div class="'+a.dom.encode(e.getTocClass(a))+'" contenteditable="false">'+b+"</div>"},q=function(a){var b="",l=p(a),d;a:{var f=9;for(d=0;d<l.length;d++)if(l[d].level<f&&(f=l[d].level),1===f){d=f;break a}d=f}--d;if(!l.length)return"";a=e.getTocHeader(a);f=g.translate("N\u1ed9i dung");var c="</"+a+">";a="<"+a+' contenteditable="true">'+h.DOM.encode(f)+c;b+=a;
for(a=0;a<l.length;a++){f=l[a];f.element.id=f.id;c=l[a+1]&&l[a+1].level;if(d===f.level)b+="<li>";else for(;d<f.level;d++)b+="<ul><li>";b+='<a href="#'+f.id+'">'+f.title+"</a>";if(c!==f.level&&c)for(d=f.level;d>c;d--)b+="</li></ul><li>";else b+="</li>",c||(b+="</ul>");d=f.level}return b},r=function(a){var b=e.getTocClass(a),c=a.$("."+b);c.length&&a.undoManager.transact(function(){c.html(q(a))})},n={hasHeaders:function(a){return 0<p(a).length},insertToc:function(a){var b=e.getTocClass(a);b=a.$("."+
b);!b.length||0<a.dom.getParents(b[0],".mce-offscreen-selection").length?a.insertContent(v(a)):r(a)},updateToc:r},w={register:function(a){a.addCommand("mceInsertToc",function(){n.insertToc(a)});a.addCommand("mceUpdateToc",function(){n.updateToc(a)})}},x={setup:function(a){var b=a.$,c=e.getTocClass(a);a.on("PreProcess",function(a){a=b("."+c,a.node);a.length&&(a.removeAttr("contentEditable"),a.find("[contenteditable]").removeAttr("contentEditable"))});a.on("SetContent",function(){var a=b("."+c);a.length&&
(a.attr("contentEditable",!1),a.children(":first-child").attr("contentEditable",!0))})}},t=function(a){return function(b){var c=function(){return b.setDisabled(a.readonly||!n.hasHeaders(a))};c();a.on("LoadContent SetContent change",c);return function(){return a.on("LoadContent SetContent change",c)}}},y=function(a){return function(b){return b&&a.dom.is(b,"."+e.getTocClass(a))&&a.getBody().contains(b)}},z={register:function(a){a.ui.registry.addButton("toc",{icon:"toc",tooltip:"Table of contents",onAction:function(){return a.execCommand("mceInsertToc")},
onSetup:t(a)});a.ui.registry.addButton("tocupdate",{icon:"reload",tooltip:"Update",onAction:function(){return a.execCommand("mceUpdateToc")}});a.ui.registry.addMenuItem("toc",{icon:"toc",text:"Table of contents",onAction:function(){return a.execCommand("mceInsertToc")},onSetup:t(a)});a.ui.registry.addContextToolbar("toc",{items:"tocupdate",predicate:y(a),scope:"node",position:"node"})}};(function(){b.add("toc",function(a){w.register(a);z.register(a);x.setup(a)})})()})();
